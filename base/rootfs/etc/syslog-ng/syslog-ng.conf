@version: 3.6

options {
  chain_hostnames(0);
  time_reopen(10);
  time_reap(360);
  log_fifo_size(2048);
  create_dirs(yes);
  group(adm);
  perm(0640);
  dir_perm(0755);
  use_dns(no);
  stats_freq(0);
};

source s_local {
  internal();
  unix-dgram("/dev/log");
};

# destinations

destination d_local {
	file("/var/log/syslog.log");
};

destination d_mysql {
	file("/var/log/mysqld.log");
};

# filters

filter f_mysql {
  program("mysqld") or program("mysqld_safe");
};

filter f_not_mysql {
  not (program("mysqld") or program("mysqld_safe"));
};

# logs

log {
	source(s_local);
  filter(f_not_mysql);
  destination(d_local);
};

log {
	source(s_local);
  filter(f_mysql);
  destination(d_mysql);
};
